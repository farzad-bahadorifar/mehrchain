<div
  class="bg-card rounded-[1.5rem] p-5 shadow-soft border border-border/50 relative overflow-hidden transition-all duration-300 hover:shadow-lg">

  <div class="flex justify-between items-start mb-3">
    <div>
      <span class="inline-block px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider mb-1"
        [class]="'bg-primary/10 text-primary'">
        {{ commitment().category }}
      </span>
      <h3 class="text-lg font-bold text-foreground">{{ commitment().title }}</h3>
    </div>

    @if (commitment().isCompletedToday) {
    <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center animate-scale-in">
      <lucide-icon name="check" class="w-5 h-5 text-white"></lucide-icon>
    </div>
    }
  </div>

  <div class="flex justify-between text-xs text-muted-foreground mb-3 font-medium">
    <span>Day {{ commitment().currentDay }} of {{ commitment().totalDays }}</span>
    <span class="flex items-center gap-1 text-primary">
      <lucide-icon name="sparkles" class="w-3 h-3"></lucide-icon>
      {{ commitment().currentStreak }} day streak
    </span>
  </div>

  <div class="h-2 w-full bg-muted rounded-full overflow-hidden mb-4">
    <div class="h-full bg-primary transition-all duration-1000 ease-out rounded-full" [style.width.%]="progressPercent">
    </div>
  </div>

  <div class="flex gap-1.5 mb-5 justify-center opacity-60">
    @for (dot of weekDots; track $index) {
    <div class="w-2 h-2 rounded-full transition-colors" [class.bg-primary]="dot === 'filled'"
      [class.bg-primary-30]="dot === 'current'" [class.bg-muted]="dot === 'empty'"
      [class.animate-pulse]="dot === 'current'"></div>
    }
  </div>

  <button (click)="onComplete.emit(commitment().id)" [disabled]="commitment().isCompletedToday"
    class="w-full py-3 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 active:scale-95"
    [class]="commitment().isCompletedToday ? 'bg-primary/10 text-primary cursor-default' : 'bg-primary text-white shadow-lg shadow-primary/20 hover:bg-accent'">

    @if (commitment().isCompletedToday) {
    <span>Completed</span>
    } @else {
    <lucide-icon name="check" class="w-5 h-5"></lucide-icon>
    <span>I did it today</span>
    }
  </button>

</div>