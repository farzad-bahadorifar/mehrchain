import{Aa as u,Fb as j,Ka as w,La as S,O as D,Oa as g,Pa as f,Qa as x,Ra as a,Sa as r,Ta as c,Ua as C,Va as E,Wa as h,Xb as I,Ya as _,Yb as J,Zb as L,_a as v,ab as A,bb as T,cb as M,gb as k,hb as o,ib as p,qa as m,qb as H,sb as s,vb as N}from"./chunk-ZFAPPMFE.js";var V=["scrollContainer"],W=(n,t,e,i,l,d)=>({"bg-gray-100":n,"bg-primary/20":t,"bg-primary/40":e,"bg-primary/70":i,"bg-primary":l,"ring-1 ring-offset-1 ring-primary":d}),q=(n,t)=>t.date;function O(n,t){if(n&1&&h(0,"div",5),n&2){let e=t.$implicit,i=v();k(H(3,W,e.level===0,e.level===1,e.level===2,e.level===3,e.level===4,i.isToday(e.date))),_("title",e.title)}}var y=class n{completedDates=N([]);scrollContainer;ngAfterViewInit(){setTimeout(()=>{let t=this.scrollContainer.nativeElement;t.scrollLeft=t.scrollWidth},100)}calendarData=s(()=>{let t=new Date,e=[],i=new Date(t);i.setDate(t.getDate()-364);let l=i.getDay();i.setDate(i.getDate()-l);let d=new Date(i),Q=new Set(this.completedDates());for(;d<=t;){let b=d.toDateString(),R=Q.has(b)?4:0;e.push({date:new Date(d),level:R,title:b}),d.setDate(d.getDate()+1)}return e});isToday(t){return t.toDateString()===new Date().toDateString()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-heatmap-calendar"]],viewQuery:function(e,i){if(e&1&&A(V,5),e&2){let l;T(l=M())&&(i.scrollContainer=l.first)}},inputs:{completedDates:[1,"completedDates"]},decls:6,vars:0,consts:[["scrollContainer",""],[1,"w-full","overflow-x-auto","pb-4","scroll-smooth"],[1,"flex","flex-col","gap-1","h-[100px]","flex-wrap","content-start","min-w-max","pr-1"],[1,"w-3","h-3","rounded-sm","transition-all","hover:ring-1","hover:ring-gray-400",3,"title","class"],[1,"flex","items-center","justify-end","gap-2","text-[10px]","text-gray-400","mt-2"],[1,"w-3","h-3","rounded-sm","transition-all","hover:ring-1","hover:ring-gray-400",3,"title"]],template:function(e,i){e&1&&(C(0,"div",1,0)(2,"div",2),g(3,O,1,10,"div",3,q),E()(),h(5,"div",4)),e&2&&(m(3),f(i.calendarData()))},dependencies:[j],encapsulation:2})};var z=(n,t)=>t.title+t.date;function B(n,t){n&1&&(a(0,"div",16),o(1," No activities yet. Start a commitment! "),r())}function G(n,t){if(n&1&&(a(0,"div",17)(1,"div",18)(2,"div",19),c(3,"lucide-icon",20),r(),a(4,"div")(5,"p",21),o(6),r(),a(7,"p",22),o(8),r()()(),a(9,"div",23),c(10,"lucide-icon",24),r()()),n&2){let e=t.$implicit;m(3),x("name",e.icon),m(3),p(e.title),m(2),p(e.date)}}function K(n,t){if(n&1&&g(0,G,11,3,"div",17,z),n&2){let e=v();f(e.recentActivities())}}var F=class n{commitmentService=D(L);recentActivities=s(()=>{let t=[];return this.commitmentService.commitments().forEach(i=>{i.history&&i.history.forEach(l=>{t.push({title:i.title,date:l,icon:this.getCategoryIcon(i.category)})})}),t.sort((i,l)=>new Date(l.date).getTime()-new Date(i.date).getTime()).slice(0,10)});getCategoryIcon(t){return{health:"heart",growth:"trending-up",community:"users",environment:"leaf"}[t]||"check"}allHistory=s(()=>{let t=this.commitmentService.commitments(),e=[];return t.forEach(i=>{i.history&&i.history.length>0&&(e=[...e,...i.history])}),e});totalActivities=s(()=>this.allHistory().length);longestStreak=this.commitmentService.overallStreak;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-journey"]],decls:31,vars:4,consts:[[1,"min-h-screen","bg-background","pb-24","px-5","pt-6","font-sans"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-2xl","font-bold","text-foreground"],[1,"text-sm","text-muted-foreground"],[1,"w-10","h-10","rounded-full","bg-primary/10","flex","items-center","justify-center","text-primary"],["name","trending-up",1,"w-5","h-5"],[1,"bg-white","rounded-3xl","p-5","shadow-sm","border","border-border/50","mb-6"],[1,"flex","items-center","gap-2","mb-4"],["name","flame",1,"w-5","h-5","text-orange-500"],[1,"font-bold","text-lg"],[3,"completedDates"],[1,"grid","grid-cols-2","gap-4","mb-8"],[1,"bg-white","p-4","rounded-2xl","border","border-border/50"],[1,"text-xs","text-muted-foreground","font-bold","uppercase","mb-1"],[1,"space-y-4"],[1,"font-bold","text-lg","px-1"],[1,"text-center","py-8","text-muted-foreground","text-sm","bg-muted/30","rounded-2xl"],[1,"bg-white","p-4","rounded-2xl","border","border-border/50","flex","items-center","justify-between","animate-fade-in"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","rounded-full","bg-primary/10","flex","items-center","justify-center","text-primary"],[1,"w-4","h-4",3,"name"],[1,"text-sm","font-bold","text-foreground"],[1,"text-[10px]","text-muted-foreground"],[1,"text-green-500"],["name","check-circle-2",1,"w-4","h-4"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"My Journey"),r(),a(5,"p",3),o(6,"Every step matters."),r()(),a(7,"div",4),c(8,"lucide-icon",5),r()(),a(9,"div",6)(10,"div",7),c(11,"lucide-icon",8),a(12,"h2",9),o(13,"Activity Log"),r()(),c(14,"app-heatmap-calendar",10),r(),a(15,"div",11)(16,"div",12)(17,"p",13),o(18,"Total Activities"),r(),a(19,"p",2),o(20),r()(),a(21,"div",12)(22,"p",13),o(23,"Longest Streak"),r(),a(24,"p",2),o(25),r()()(),a(26,"div",14)(27,"h3",15),o(28,"Recent Activity"),r(),w(29,B,2,0,"div",16)(30,K,2,0),r()()),e&2&&(m(14),x("completedDates",i.allHistory()),m(6),p(i.totalActivities()),m(5),p(i.longestStreak()),m(4),S(i.recentActivities().length===0?29:30))},dependencies:[y,J,I],encapsulation:2})};export{F as Journey};
