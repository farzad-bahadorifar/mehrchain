import{a as me,b as fe,c as ge,d as be,e as he,f as _e,g as Me}from"./chunk-DK4XJVIK.js";import{$ as ce,Aa as F,D as M,Fb as pe,G as w,Ga as de,H as re,Ia as X,J as Z,Jb as xe,Ka as E,Kb as ve,La as k,Lb as Ce,M as oe,Mb as ye,N as Y,Na as L,Nb as we,O as b,Oa as I,Ob as W,P as ae,Pa as V,Pb as Se,Q as se,Qa as Q,Qb as B,Ra as o,Rb as Ee,Sa as a,Sb as ke,Ta as f,Tb as Te,U as p,Ub as $,V as m,Vb as z,W as le,Wb as De,Xa as x,Xb as G,Yb as T,Za as g,Zb as Oe,_a as c,a as ie,ca as _,db as R,e as A,f as P,fb as ee,gb as U,hb as l,ib as H,n as y,pb as te,qa as u,u as v,v as J,wb as ue,y as S}from"./chunk-LJVRMDT4.js";var ne="Service workers are disabled or not supported by this browser",D=class{serviceWorker;worker;registration;events;constructor(i,e){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=new A(r=>r.error(new w(5601,!1)));else{let r=null,t=new P;this.worker=new A(h=>(r!==null&&h.next(r),t.subscribe(N=>h.next(N))));let s=()=>{let{controller:h}=i;h!==null&&(r=h,t.next(r))};i.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(M(()=>i.getRegistration().then(h=>{if(!h)throw new w(5601,!1);return h})));let d=new P;this.events=d.asObservable();let C=h=>{let{data:N}=h;N?.type&&d.next(N)};i.addEventListener("message",C),e?.get(X,null,{optional:!0})?.onDestroy(()=>{i.removeEventListener("controllerchange",s),i.removeEventListener("message",C)})}}postMessage(i,e){return new Promise(r=>{this.worker.pipe(S(1)).subscribe(t=>{t.postMessage(ie({action:i},e)),r()})})}postMessageWithOperation(i,e,r){let t=this.waitForOperationCompleted(r),s=this.postMessage(i,e);return Promise.all([s,t]).then(([,d])=>d)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=r=>r.type===i:e=r=>i.includes(r.type),this.events.pipe(J(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(S(1))}waitForOperationCompleted(i){return new Promise((e,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(J(t=>t.nonce===i),S(1),y(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).subscribe({next:e,error:r})})}get isEnabled(){return!!this.serviceWorker}},Pe=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new P;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=v,this.notificationClicks=v,this.notificationCloses=v,this.pushSubscriptionChanges=v,this.subscription=v;return}this.messages=this.sw.eventsOfType("PUSH").pipe(y(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(y(t=>t.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(y(t=>t.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(y(t=>t.data)),this.pushManager=this.sw.registration.pipe(y(t=>t.pushManager));let r=this.pushManager.pipe(M(t=>t.getSubscription()));this.subscription=new A(t=>{let s=r.subscribe(t),d=this.subscriptionChanges.subscribe(t);return()=>{s.unsubscribe(),d.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(ne));let r={userVisibleOnly:!0},t=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(t.length));for(let d=0;d<t.length;d++)s[d]=t.charCodeAt(d);return r.applicationServerKey=s,new Promise((d,C)=>{this.pushManager.pipe(M(O=>O.subscribe(r)),S(1)).subscribe({next:O=>{this.subscriptionChanges.next(O),d(O)},error:C})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(ne));let e=r=>{if(r===null)throw new w(5602,!1);return r.unsubscribe().then(t=>{if(!t)throw new w(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,t)=>{this.subscription.pipe(S(1),M(e)).subscribe({next:r,error:t})})}decodeBase64(e){return atob(e)}static \u0275fac=function(r){return new(r||n)(Y(D))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Fe=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=v,this.unrecoverable=v;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ne));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new w(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(r){return new(r||n)(Y(D))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Re=new oe("");function Le(){let n=b(j);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let i=b(Re),e=b(ce),r=b(X);e.runOutsideAngular(()=>{let t=navigator.serviceWorker,s=()=>t.controller?.postMessage({action:"INITIALIZE"});t.addEventListener("controllerchange",s),r.onDestroy(()=>{t.removeEventListener("controllerchange",s)})}),e.runOutsideAngular(()=>{let t,{registrationStrategy:s}=n;if(typeof s=="function")t=new Promise(d=>s().subscribe(()=>d()));else{let[d,...C]=(s||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":t=Promise.resolve();break;case"registerWithDelay":t=Ie(+C[0]||0);break;case"registerWhenStable":t=Promise.race([r.whenStable(),Ie(+C[0])]);break;default:throw new w(5600,!1)}}t.then(()=>{r.destroyed||navigator.serviceWorker.register(i,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(d=>console.error(re(5604,!1)))})})}function Ie(n){return new Promise(i=>setTimeout(i,n))}function Ue(){let n=b(j),i=b(le),e=!0;return new D(e&&n.enabled!==!1?navigator.serviceWorker:void 0,i)}var j=class{enabled;updateViaCache;type;scope;registrationStrategy};function je(n,i={}){return ae([Pe,Fe,{provide:Re,useValue:n},{provide:j,useValue:i},{provide:D,useFactory:Ue},de(Le)])}var Be=()=>[7,14,21],$e=()=>[1,2,3],ze=(n,i)=>i.id;function Ge(n,i){n&1&&(o(0,"div",6)(1,"h1",12),l(2," Small Acts."),f(3,"br"),o(4,"span",13),l(5,"Big Change."),a()(),o(6,"p",14),l(7," Your journey to making the world a little kinder begins right here. "),a()())}function Ke(n,i){if(n&1){let e=x();o(0,"div",8)(1,"button",15),g("click",function(){p(e);let t=c();return m(t.nextStep())}),l(2," Start My Journey "),a(),o(3,"button",16),g("click",function(){p(e);let t=c();return m(t.login())}),l(4," I have an account "),a()()}}function qe(n,i){if(n&1){let e=x();o(0,"button",20),g("click",function(){let t=p(e).$implicit,s=c(2);return m(s.selectCategory(t.id))}),o(1,"div"),f(2,"lucide-icon",21),a(),o(3,"span",22),l(4),a()()}if(n&2){let e=i.$implicit;u(),U("w-14 h-14 rounded-full flex items-center justify-center mb-3 transition-transform group-hover:scale-110 "+e.bg),u(),U("w-7 h-7 "+e.color),Q("name",e.icon),u(2),H(e.label)}}function Je(n,i){if(n&1&&(o(0,"div",9)(1,"h2",17),l(2,"Where do you want to shine?"),a(),o(3,"div",18),I(4,qe,5,6,"button",19,ze),a()()),n&2){let e=c();u(4),V(e.categories)}}function Ze(n,i){if(n&1){let e=x();o(0,"button",29),g("click",function(){let t=p(e).$implicit,s=c(2);return m(s.selectHabit(t))}),o(1,"span"),l(2),a(),f(3,"lucide-icon",30),a()}if(n&2){let e=i.$implicit;u(2),H(e)}}function Ye(n,i){if(n&1){let e=x();o(0,"div",27)(1,"input",31,0),g("keyup.enter",function(){p(e);let t=R(2),s=c(2);return m(s.confirmCustomHabit(t.value))}),a(),o(3,"button",32),g("click",function(){p(e);let t=R(2),s=c(2);return m(s.confirmCustomHabit(t.value))}),l(4," Confirm "),a()()}}function Xe(n,i){if(n&1){let e=x();o(0,"button",33),g("click",function(){p(e);let t=c(2);return m(t.enableCustomHabit())}),l(1," \u2728 Create your own spark... "),a()}}function Qe(n,i){if(n&1&&(o(0,"div",9)(1,"h2",23),l(2,"Pick a simple spark"),a(),o(3,"p",24),l(4,"Something small you can do today."),a(),o(5,"div",25),I(6,Ze,4,1,"button",26,L),E(8,Ye,5,0,"div",27)(9,Xe,2,0,"button",28),a()()),n&2){let e=c();u(6),V(e.habitsMock[e.selectedCategory()]),u(2),k(e.isCustomHabit()?8:9)}}function et(n,i){if(n&1){let e=x();o(0,"button",45),g("click",function(){let t=p(e).$implicit,s=c(2);return s.setDuration(t),m(s.isCustomDuration.set(!1))}),o(1,"span",46),l(2),a(),o(3,"span",47),l(4,"Days"),a()()}if(n&2){let e=i.$implicit,r=c(2);ee("border-primary",r.selectedDuration()===e&&!r.isCustomDuration())("bg-primary-5",r.selectedDuration()===e&&!r.isCustomDuration())("text-primary",r.selectedDuration()===e&&!r.isCustomDuration())("border-gray-200",r.selectedDuration()!==e),u(2),H(e)}}function tt(n,i){if(n&1){let e=x();o(0,"div",36)(1,"input",48,1),g("keyup.enter",function(){p(e);let t=R(2),s=c(2);return m(s.confirmCustomDuration(t.value))})("blur",function(){p(e);let t=R(2),s=c(2);return m(s.confirmCustomDuration(t.value))}),a()()}}function nt(n,i){if(n&1){let e=x();o(0,"button",49),g("click",function(){p(e);let t=c(2);return m(t.toggleCustomDuration())}),f(1,"lucide-icon",50),o(2,"span",47),l(3,"Custom"),a()()}}function it(n,i){if(n&1){let e=x();o(0,"div",10)(1,"div")(2,"h2",17),l(3,"Commit for how long?"),a(),o(4,"div",34),I(5,et,5,9,"button",35,L),E(7,tt,3,0,"div",36)(8,nt,4,0,"button",37),a(),o(9,"div",38)(10,"div",39),l(11,"\u{1F4A1}"),a(),o(12,"div",40)(13,"span",41),l(14,"Why this matters?"),a(),o(15,"textarea",42),g("input",function(t){p(e);let s=c();return m(s.whyText.set(t.target.value))}),a()()()(),o(16,"button",43),g("click",function(){p(e);let t=c();return m(t.finish())}),l(17," Light My Lamp "),f(18,"lucide-icon",44),a()()}if(n&2){let e=c();u(5),V(te(2,Be)),u(2),k(e.isCustomDuration()?7:8),u(8),Q("value",e.whyText())}}function rt(n,i){if(n&1&&f(0,"div",52),n&2){let e=i.$implicit,r=c(2);U(e<=r.step()?"w-8 bg-primary":"w-2 bg-muted-foreground/30")}}function ot(n,i){n&1&&(o(0,"div",11),I(1,rt,1,2,"div",51,L),a()),n&2&&(u(),V(te(0,$e)))}var K=class n{router=b(ge);commitmentService=b(Oe);meroService=b(Me);isCustomDuration=_(!1);isCustomHabit=_(!1);whyText=_("To prove to myself that small steps matter.");step=_(0);selectedCategory=_(null);selectedHabit=_(null);selectedDuration=_(21);categories=[{id:"health",label:"Health",icon:W,color:"text-primary",bg:"bg-primary/10 border-primary/20"},{id:"environment",label:"Environment",icon:B,color:"text-accent",bg:"bg-accent/10 border-accent/20"},{id:"community",label:"Community",icon:z,color:"text-teal-600",bg:"bg-teal-100 border-teal-200"},{id:"growth",label:"Growth",icon:$,color:"text-cyan-600",bg:"bg-cyan-100 border-cyan-200"}];habitsMock={health:["Drink water after waking up","5 mins stretching","No sugar today"],environment:["Pick up one piece of trash","Use reusable bag","Turn off extra lights"],community:["Call a family member","Smile at a stranger","Donate small amount"],growth:["Read 10 pages","Write daily journal","Learn one new word"]};nextStep(){this.step.update(i=>i+1),this.meroService.setState("waiting")}selectCategory(i){this.selectedCategory.set(i),this.meroService.setState("happy"),setTimeout(()=>this.nextStep(),500)}selectHabit(i){this.selectedHabit.set(i),this.nextStep()}setDuration(i){this.selectedDuration.set(i)}toggleCustomDuration(){this.isCustomDuration.set(!0)}confirmCustomDuration(i){let e=parseInt(i);e>0&&(this.selectedDuration.set(e),this.isCustomDuration.set(!1))}finish(){this.selectedHabit()&&this.selectedCategory()&&(this.commitmentService.addCommitment({title:this.selectedHabit(),category:this.selectedCategory(),totalDays:this.selectedDuration(),why:this.whyText()}),this.meroService.setState("celebrating"),this.router.navigate(["/dashboard"]))}login(){alert("Login feature coming soon! For now, just start as a guest.")}enableCustomHabit(){this.isCustomHabit.set(!0)}confirmCustomHabit(i){i.trim()&&this.selectHabit(i)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-onboarding"]],decls:11,vars:7,consts:[["customInput",""],["durInput",""],[1,"min-h-screen","flex","flex-col","items-center","justify-between","p-6","bg-background","relative","overflow-hidden","font-sans"],[1,"flex-1","flex","flex-col","items-center","justify-center","w-full","max-w-md","transition-all","duration-700","ease-out"],[1,"relative","w-64","h-64","mb-8","animate-bounce-slow","filter","drop-shadow-2xl"],["src","assets/mero.png","alt","Mero Mascot",1,"w-full","h-full","object-contain"],[1,"text-center","animate-fade-in","space-y-4"],[1,"w-full","max-w-md","bg-card","rounded-[2rem]","shadow-float","p-8","flex","flex-col","justify-between","animate-slide-up","relative","z-10","border","border-white/20","backdrop-blur-sm"],[1,"flex","flex-col","h-full","justify-end","space-y-4"],[1,"animate-fade-in","h-full","flex","flex-col"],[1,"animate-fade-in","h-full","flex","flex-col","justify-between"],[1,"flex","gap-3","mt-8","mb-4"],[1,"text-4xl","font-extrabold","text-foreground","tracking-tight","leading-tight"],[1,"text-primary"],[1,"text-muted-foreground","text-lg","max-w-xs","mx-auto","leading-relaxed"],[1,"w-full","bg-primary","text-primary-foreground","py-4","rounded-2xl","font-bold","text-lg","shadow-lg","shadow-primary/25","hover:bg-accent","hover:scale-[1.02]","active:scale-95","transition-all","duration-300",3,"click"],[1,"text-sm","text-muted-foreground","font-medium","hover:text-primary","transition-colors",3,"click"],[1,"text-2xl","font-bold","mb-6","text-center","text-foreground"],[1,"grid","grid-cols-2","gap-4","flex-1"],[1,"flex","flex-col","items-center","justify-center","p-4","rounded-2xl","border-2","border-transparent","bg-muted/50","hover:bg-white","hover:border-primary/30","hover:shadow-md","transition-all","duration-300","group","active:scale-95","aspect-square"],[1,"flex","flex-col","items-center","justify-center","p-4","rounded-2xl","border-2","border-transparent","bg-muted/50","hover:bg-white","hover:border-primary/30","hover:shadow-md","transition-all","duration-300","group","active:scale-95","aspect-square",3,"click"],[3,"name"],[1,"font-semibold","text-foreground","group-hover:text-primary","transition-colors"],[1,"text-2xl","font-bold","mb-2","text-center","text-foreground"],[1,"text-center","text-muted-foreground","mb-6","text-sm"],[1,"space-y-3","flex-1","overflow-y-auto","pr-1","custom-scrollbar"],[1,"w-full","text-left","p-5","rounded-2xl","bg-muted/40","hover:bg-primary","hover:text-white","border","border-transparent","hover:shadow-lg","hover:shadow-primary/20","transition-all","duration-300","font-medium","group","flex","items-center","justify-between"],[1,"mt-4","animate-fade-in"],[1,"..."],[1,"w-full","text-left","p-5","rounded-2xl","bg-muted/40","hover:bg-primary","hover:text-white","border","border-transparent","hover:shadow-lg","hover:shadow-primary/20","transition-all","duration-300","font-medium","group","flex","items-center","justify-between",3,"click"],["name","arrow-right",1,"w-5","h-5","opacity-0","group-hover:opacity-100","-translate-x-2","group-hover:translate-x-0","transition-all"],["type","text","placeholder","Type your habit...",1,"w-full","p-4","rounded-xl","border-2","border-primary","bg-white","focus:outline-none",3,"keyup.enter"],[1,"w-full","mt-2","bg-primary","text-white","py-3","rounded-xl","font-bold",3,"click"],[1,"...",3,"click"],[1,"grid","grid-cols-4","gap-2","mb-8"],[1,"flex","flex-col","items-center","justify-center","py-3","rounded-xl","border-2","transition-all","duration-300",3,"border-primary","bg-primary-5","text-primary","border-gray-200"],[1,"flex","flex-col","items-center","justify-center","p-1","rounded-xl","border-2","border-primary","bg-white","animate-fade-in"],[1,"flex","flex-col","items-center","justify-center","py-3","rounded-xl","border-2","border-gray-200","text-gray-400","hover:border-primary/50","hover:text-primary","transition-all"],[1,"bg-gradient-to-br","from-primary/5","to-accent/5","p-4","rounded-2xl","border","border-primary/10","flex","gap-3"],[1,"w-8","h-8","..."],[1,"w-full"],[1,"font-bold","text-foreground","block","mb-1","text-sm"],["placeholder","Write your reason...",1,"w-full","bg-transparent","text-sm","text-muted-foreground","resize-none","focus:outline-none","border-b","border-primary/20","focus:border-primary","h-16",3,"input","value"],[1,"w-full","bg-primary","text-primary-foreground","py-4","rounded-2xl","font-bold","text-lg","shadow-lg","shadow-primary/25","hover:bg-accent","hover:scale-[1.02]","active:scale-95","transition-all","duration-300","flex","items-center","justify-center","gap-2","mt-6",3,"click"],["name","sparkles",1,"w-5","h-5"],[1,"flex","flex-col","items-center","justify-center","py-3","rounded-xl","border-2","transition-all","duration-300",3,"click"],[1,"text-lg","font-bold"],[1,"text-[10px]","font-medium","uppercase"],["type","number","placeholder","#","autoFocus","",1,"w-full","text-center","font-bold","text-lg","outline-none","bg-transparent",3,"keyup.enter","blur"],[1,"flex","flex-col","items-center","justify-center","py-3","rounded-xl","border-2","border-gray-200","text-gray-400","hover:border-primary/50","hover:text-primary","transition-all",3,"click"],["name","plus",1,"w-6","h-6","mb-1"],[1,"h-2","rounded-full","transition-all","duration-500","ease-out",3,"class"],[1,"h-2","rounded-full","transition-all","duration-500","ease-out"]],template:function(e,r){if(e&1&&(o(0,"div",2)(1,"div",3)(2,"div",4),f(3,"img",5),a(),E(4,Ge,8,0,"div",6),a(),o(5,"div",7),E(6,Ke,5,0,"div",8)(7,Je,6,0,"div",9)(8,Qe,10,1,"div",9)(9,it,19,3,"div",10),a(),E(10,ot,3,1,"div",11),a()),e&2){let t;u(),ee("scale-75",r.step()>0)("-translate-y-10",r.step()>0),u(3),k(r.step()===0?4:-1),u(2),k((t=r.step())===0?6:t===1?7:t===2?8:t===3?9:-1),u(4),k(r.step()>0?10:-1)}},dependencies:[pe,T,G],encapsulation:2})};var Ne=[{path:"",component:K},{path:"dashboard",loadComponent:()=>import("./chunk-IIFQNX7Y.js").then(n=>n.DashboardComponent)},{path:"journey",loadComponent:()=>import("./chunk-P6TSKXLI.js").then(n=>n.Journey)}];var Ae={providers:[_e(Ne),je("ngsw-worker.js",{enabled:!ue(),registrationStrategy:"registerWhenStable:30000"}),se(T.pick({Home:Se,Plus:ke,Flame:ye,Check:ve,Sparkles:Te,Heart:W,Leaf:B,Users:z,TrendingUp:$,ArrowRight:xe,X:De,Globe:we,Lock:Ee,CheckCircle2:Ce}))]};var q=class n{title=_("mehrchain-frontend");static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-root"]],decls:11,vars:0,consts:[[1,"fixed","bottom-0","left-0","right-0","bg-white/80","backdrop-blur-md","border-t","border-border/50","px-6","py-3","flex","justify-around","items-center","z-40","safe-bottom"],["routerLink","/dashboard","routerLinkActive","text-primary bg-primary/10",1,"flex","flex-col","items-center","gap-1","p-2","rounded-xl","text-muted-foreground","transition-all"],["name","home",1,"w-6","h-6"],[1,"text-[10px]","font-bold"],[1,"w-12"],["routerLink","/journey","routerLinkActive","text-primary bg-primary/10",1,"flex","flex-col","items-center","gap-1","p-2","rounded-xl","text-muted-foreground","transition-all"],["name","trending-up",1,"w-6","h-6"]],template:function(e,r){e&1&&(f(0,"router-outlet"),o(1,"nav",0)(2,"a",1),f(3,"lucide-icon",2),o(4,"span",3),l(5,"Home"),a()(),f(6,"div",4),o(7,"a",5),f(8,"lucide-icon",6),o(9,"span",3),l(10,"Journey"),a()()())},dependencies:[fe,be,he,T,G],encapsulation:2})};me(q,Ae).catch(n=>console.error(n));
